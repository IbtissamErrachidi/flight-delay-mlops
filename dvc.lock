schema: '2.0'
stages:
  prepare_data:
    cmd: python -m src.data.prepare_data
    deps:
    - path: data/raw/leftover_flights_2000.csv
      hash: md5
      md5: d3f5c862af6fe7385ce11ab2b5d1529c
      size: 195772
    - path: src/data/prepare_data.py
      hash: md5
      md5: 59597852a2496e63bd11d12111048e5a
      size: 1652
    outs:
    - path: data/processed/X_test.csv
      hash: md5
      md5: 07dd16d911b1c6eb3daa438534ab9cad
      size: 48850
    - path: data/processed/X_train.csv
      hash: md5
      md5: f55e0dedc85492ceb68bce96b04cd80e
      size: 197952
    - path: data/processed/y_test.csv
      hash: md5
      md5: 04f9ecdc8f877fd58d5301462654ff38
      size: 2431
    - path: data/processed/y_train.csv
      hash: md5
      md5: 8581dbb38443a97a8187da36aa2ac264
      size: 9785
    - path: models/encoder.pkl
      hash: md5
      md5: 6e64ec98a4e73f5d2598d60cb474c634
      size: 3566
  train_model:
    cmd: python -m src.models.train
    deps:
    - path: data/processed/X_train.csv
      hash: md5
      md5: f55e0dedc85492ceb68bce96b04cd80e
      size: 197952
    - path: data/processed/y_train.csv
      hash: md5
      md5: 8581dbb38443a97a8187da36aa2ac264
      size: 9785
    - path: src/models/train.py
      hash: md5
      md5: 9994f7b9d1398fa3735d9da3dc3d3930
      size: 4935
    params:
      params.yaml:
        model.xgboost.learning_rate: 0.05
        model.xgboost.max_depth: 8
        model.xgboost.n_estimators: 700
    outs:
    - path: models/best_model.pkl
      hash: md5
      md5: 01a85658994bce20cfae2213ddf355d5
      size: 10010513
  evaluate:
    cmd: python -m src.models.evaluate
    deps:
    - path: data/processed/X_test.csv
      hash: md5
      md5: 07dd16d911b1c6eb3daa438534ab9cad
      size: 48850
    - path: data/processed/y_test.csv
      hash: md5
      md5: 04f9ecdc8f877fd58d5301462654ff38
      size: 2431
    - path: models/best_model.pkl
      hash: md5
      md5: 01a85658994bce20cfae2213ddf355d5
      size: 10010513
    - path: src/models/evaluate.py
      hash: md5
      md5: 82e44261ce96516760478cd1157aeea6
      size: 3042
    outs:
    - path: evaluation/confusion_matrix.png
      hash: md5
      md5: 83dd28ace1dec430180e9ebb156b4d4f
      size: 17820
    - path: evaluation/metrics.json
      hash: md5
      md5: 98ec4ceec03056d93c9011e80296f5be
      size: 96
    - path: evaluation/predictions.csv
      hash: md5
      md5: fa3834995b5fbb47caaa9ca2ec68f95c
      size: 4796
    - path: evaluation/scatter_plot.png
      hash: md5
      md5: a735755c220ecc20e7debca9a84ccc31
      size: 32987
  evaluate_evidently:
    cmd: python -m src.models.evaluate_evidently
    deps:
    - path: data/processed/X_test.csv
      hash: md5
      md5: 07dd16d911b1c6eb3daa438534ab9cad
      size: 48850
    - path: data/processed/y_test.csv
      hash: md5
      md5: 04f9ecdc8f877fd58d5301462654ff38
      size: 2431
    - path: models/best_model.pkl
      hash: md5
      md5: 01a85658994bce20cfae2213ddf355d5
      size: 10010513
    - path: src/models/evaluate_evidently.py
      hash: md5
      md5: 927632e52a1aa1f91cd6b6a6b93ee621
      size: 1634
    outs:
    - path: reports/evidently_regression_report.json
      hash: md5
      md5: 25aa8d74b509add930af34d15cfae5a3
      size: 1987
