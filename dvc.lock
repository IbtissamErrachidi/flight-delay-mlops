schema: '2.0'
stages:
  prepare_data:
    cmd: python -m src.data.prepare_data
    deps:
    - path: data/raw/df_final.csv
      hash: md5
      md5: 6d641230621a41045a8f99a036f71010
      size: 98254458
    - path: src/data/prepare_data.py
      hash: md5
      md5: 1321441619b2a964b20b0ba319abdfe3
      size: 1639
    outs:
    - path: data/processed/X_test.csv
      hash: md5
      md5: e21e358956f05f3e8f2cbb89a947f621
      size: 25515956
    - path: data/processed/X_train.csv
      hash: md5
      md5: 1dbe4bc397e3a0b48c6e005a05b7c2fa
      size: 102098473
    - path: data/processed/y_test.csv
      hash: md5
      md5: b97b5cc125a7d1d90c3ee67bf82b9b7f
      size: 1196965
    - path: data/processed/y_train.csv
      hash: md5
      md5: d5fff3ef5c9d24a3f5554b875fb34266
      size: 4791524
    - path: models/encoder.pkl
      hash: md5
      md5: 13526bb83594dfdd1e6978baf665a755
      size: 5934
  train_model:
    cmd: python -m src.models.train
    deps:
    - path: data/processed/X_train.csv
      hash: md5
      md5: 1dbe4bc397e3a0b48c6e005a05b7c2fa
      size: 102098473
    - path: data/processed/y_train.csv
      hash: md5
      md5: d5fff3ef5c9d24a3f5554b875fb34266
      size: 4791524
    - path: src/models/train.py
      hash: md5
      md5: 9994f7b9d1398fa3735d9da3dc3d3930
      size: 4935
    params:
      params.yaml:
        model.xgboost.learning_rate: 0.05
        model.xgboost.max_depth: 8
        model.xgboost.n_estimators: 700
    outs:
    - path: models/best_model.pkl
      hash: md5
      md5: 446f85d5f4de58f65d17ec3e13a39cf5
      size: 11497060
  evaluate:
    cmd: python -m src.models.evaluate
    deps:
    - path: data/processed/X_test.csv
      hash: md5
      md5: e21e358956f05f3e8f2cbb89a947f621
      size: 25515956
    - path: data/processed/y_test.csv
      hash: md5
      md5: b97b5cc125a7d1d90c3ee67bf82b9b7f
      size: 1196965
    - path: src/models/evaluate.py
      hash: md5
      md5: 82e44261ce96516760478cd1157aeea6
      size: 3042
    outs:
    - path: evaluation/confusion_matrix.png
      hash: md5
      md5: 9dec3ca6fee069853d6fb3ec28921e21
      size: 19390
    - path: evaluation/metrics.json
      hash: md5
      md5: da378e73ee4fc541d7c70f55d3516872
      size: 97
    - path: evaluation/predictions.csv
      hash: md5
      md5: 9d47f1c09627f5ad74b9e22d3c43e900
      size: 3190508
    - path: evaluation/scatter_plot.png
      hash: md5
      md5: b479ca824b5f03afa35ee8496291073c
      size: 162320
